sn:{last where 1=count each group x};

0N!sn 2 2 1;
0N!sn 4 1 2 1 2;
0N!sn (),1;

/ 
q)\t:10 sn x
0
q)\t:10 sn 1000?10000
2
q)\t:10 sn 100000?10000
39
q)\t:10 sn 1000000?10000
162
